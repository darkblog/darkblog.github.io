<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پاسگاه | وبلاگ شخصی</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #dc3545;
            --primary-light: #ffe6e9;
            --primary-dark: #b02a37;
            --secondary-color: #34a853;
            --facebook-color: #1877f2;
            --facebook-light: #e7f3ff;
            --rss-color: #f26522;
            --rss-light: #fff0e8;
            --rss-dark: #d35400;
            --text-primary: #202124;
            --text-secondary: #5f6368;
            --text-light: #ffffff;
            --background-color: #ffffff;
            --surface-color: #f8f9fa;
            --border-color: #e9ecef;
            --shadow-light: 0 1px 2px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 2px 6px rgba(0, 0, 0, 0.1);
            --shadow-high: 0 4px 12px rgba(0, 0, 0, 0.15);
            --shadow-menu: 0 8px 24px rgba(0, 0, 0, 0.2);
            --border-radius: 8px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: var(--surface-color);
            color: var(--text-primary);
            line-height: 1.6;
            padding-bottom: 60px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background-color: var(--background-color);
            box-shadow: var(--shadow-light);
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: center;
            width: 100%;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
            position: relative;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: var(--text-primary);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            object-fit: contain;
        }

        .logo-text {
            font-size: 22px;
            font-weight: 600;
        }

        .nav-container {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: auto;
        }

        .nav-links {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            padding: 0 20px;
            height: 70px;
            transition: var(--transition);
            position: relative;
            cursor: pointer;
        }

        .nav-link:hover {
            color: var(--primary-color);
        }

        .nav-link.active {
            color: var(--primary-color);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 20px;
            left: 20px;
            height: 3px;
            background-color: var(--primary-color);
            border-radius: 3px 3px 0 0;
            transition: var(--transition);
        }

        .nav-link:not(.active):hover::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 20px;
            left: 20px;
            height: 2px;
            background-color: var(--primary-color);
            border-radius: 2px 2px 0 0;
            opacity: 0.5;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            min-width: 220px;
            background-color: var(--background-color);
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            box-shadow: var(--shadow-menu);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .nav-item:hover .dropdown-menu,
        .nav-item.dropdown-open .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            padding: 0;
        }

        .dropdown-link {
            display: block;
            padding: 14px 20px;
            text-decoration: none;
            color: var(--text-primary);
            transition: var(--transition);
            border-bottom: 1px solid var(--border-color);
        }

        .dropdown-link:hover {
            background-color: var(--surface-color);
            color: var(--primary-color);
            padding-right: 28px;
        }

        .dropdown-link:last-child {
            border-bottom: none;
        }

        .dropdown-link .material-icons {
            font-size: 18px;
            vertical-align: middle;
            margin-left: 8px;
        }

        .dropdown-submenu {
            position: relative;
        }

        .dropdown-submenu > .dropdown-link::after {
            content: 'arrow_back';
            font-family: 'Material Icons';
            float: left;
            font-size: 18px;
            transition: var(--transition);
        }

        .submenu {
            position: absolute;
            top: 0;
            right: 100%;
            min-width: 200px;
            background-color: var(--background-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-menu);
            opacity: 0;
            visibility: hidden;
            transform: translateX(10px);
            transition: all 0.3s ease;
        }

        .dropdown-submenu:hover .submenu {
            opacity: 1;
            visibility: visible;
            transform: translateX(0);
        }

        .header-left {
            display: flex;
            align-items: center;
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
        }

        .search-container {
            display: flex;
            align-items: center;
            margin-left: 20px;
            position: relative;
        }

        .search-input {
            padding: 10px 15px 10px 40px;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            width: 200px;
            transition: var(--transition);
            font-size: 14px;
            height: 40px;
            text-align: right;
            direction: rtl;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            width: 250px;
            box-shadow: var(--shadow-light);
        }

        .search-btn {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            transition: var(--transition);
        }

        .search-btn:hover {
            color: var(--primary-color);
        }

        .search-btn .material-icons {
            font-size: 20px;
        }

        .rss-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            color: var(--rss-color);
            text-decoration: none;
            font-weight: 500;
        }

        .rss-btn .material-icons {
            font-size: 24px;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 28px;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 10px;
            border-radius: var(--border-radius);
            transition: var(--transition);
            z-index: 1001;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
        }

        .mobile-menu-btn:hover {
            background-color: var(--surface-color);
            color: var(--primary-color);
        }

        .mobile-menu-btn .material-icons {
            font-size: 28px;
        }

        .mobile-header-actions {
            display: none;
            align-items: center;
            gap: 15px;
            position: absolute;
            left: 60px;
            top: 50%;
            transform: translateY(-50%);
        }

        .mobile-search-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: var(--border-radius);
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mobile-search-btn:hover {
            background-color: var(--surface-color);
            color: var(--primary-color);
        }

        .mobile-site-info {
            display: none;
            align-items: center;
            gap: 8px;
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
        }

        .mobile-logo {
            width: 28px;
            height: 28px;
            object-fit: contain;
        }

        .mobile-site-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .hero-section {
            padding: 80px 0 40px;
            text-align: center;
            background-color: var(--background-color);
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 40px;
        }

        .site-title {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 20px;
            color: var(--primary-color);
            line-height: 1.2;
        }

        .site-description {
            font-size: 20px;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto 30px;
            line-height: 1.7;
        }

        .stats-container {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 36px;
            font-weight: 700;
            color: var(--primary-color);
            display: block;
        }

        .stat-label {
            font-size: 16px;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .main-content {
            padding-top: 20px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .section-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .posts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .post-card {
            background-color: var(--background-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-light);
            transition: var(--transition);
            height: 100%;
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: inherit;
            position: relative;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .post-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-high);
        }

        .post-image {
            height: 200px;
            background-color: var(--primary-light);
            overflow: hidden;
            position: relative;
        }

        .post-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .post-image img.loaded {
            opacity: 1;
        }

        .post-card:hover .post-image img {
            transform: scale(1.05);
        }

        .post-category-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: rgba(220, 53, 69, 0.9);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            z-index: 1;
        }

        .post-content {
            padding: 24px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .post-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-primary);
            line-height: 1.4;
            transition: var(--transition);
        }

        .post-card:hover .post-title {
            color: var(--primary-color);
        }

        .post-excerpt {
            color: var(--text-secondary);
            flex-grow: 1;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .post-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-secondary);
            font-size: 14px;
            margin-top: auto;
        }

        .post-date {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .post-read-time {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .load-more-container {
            text-align: center;
            margin: 40px 0;
        }

        .load-more-btn {
            padding: 12px 30px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .load-more-btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .load-more-btn:disabled {
            background-color: var(--text-secondary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .loading-spinner {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .no-posts {
            text-align: center;
            padding: 60px 20px;
            grid-column: 1 / -1;
        }

        .no-posts-icon {
            font-size: 64px;
            color: var(--text-secondary);
            margin-bottom: 20px;
            display: block;
        }

        footer {
            background-color: var(--background-color);
            padding: 40px 0;
            border-top: 1px solid var(--border-color);
            margin-top: 60px;
        }

        .footer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 20px;
            font-weight: 500;
        }

        .footer-logo img {
            width: 24px;
            height: 24px;
            object-fit: contain;
        }

        .footer-links {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: var(--border-radius);
        }

        .footer-link:hover {
            color: var(--primary-color);
            background-color: var(--surface-color);
        }

        .footer-link.facebook:hover {
            color: var(--facebook-color);
            background-color: var(--facebook-light);
        }

        .footer-link.rss:hover {
            color: var(--rss-color);
            background-color: var(--rss-light);
        }

        .copyright {
            color: var(--text-secondary);
            font-size: 14px;
            margin-top: 10px;
        }

        .mobile-menu-overlay {
            display: none;
            position: fixed;
            top: 70px;
            right: 0;
            left: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .mobile-nav {
            display: none;
            position: fixed;
            top: 70px;
            right: -100%;
            width: 100%;
            height: calc(100vh - 70px);
            background-color: var(--background-color);
            box-shadow: var(--shadow-high);
            z-index: 1000;
            transition: right 0.3s ease;
            overflow-y: auto;
        }

        @media (max-width: 992px) {
            .search-input {
                width: 180px;
            }
            
            .search-input:focus {
                width: 200px;
            }
            
            .nav-link {
                padding: 0 15px;
            }
            
            .nav-link.active::after,
            .nav-link:not(.active):hover::after {
                right: 15px;
                left: 15px;
            }
            
            .site-title {
                font-size: 36px;
            }
            
            .site-description {
                font-size: 18px;
            }
            
            .posts-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            header {
                justify-content: flex-start;
            }
            
            .header-container {
                max-width: 100%;
                width: 100%;
                padding: 0 10px;
            }
            
            .header-left, .nav-container, .logo-container {
                display: none;
            }
            
            .mobile-menu-btn {
                display: flex;
                left: 10px;
            }
            
            .mobile-site-info {
                display: flex;
            }
            
            .mobile-header-actions {
                display: flex;
            }
            
            .posts-grid {
                grid-template-columns: 1fr;
            }
            
            .hero-section {
                padding: 60px 0 30px;
            }
            
            .site-title {
                font-size: 32px;
            }
            
            .site-description {
                font-size: 16px;
                padding: 0 20px;
            }
            
            .stats-container {
                gap: 20px;
            }
            
            .stat-number {
                font-size: 28px;
            }
            
            .section-title {
                font-size: 24px;
            }
            
            .mobile-menu-overlay {
                display: block;
            }
            
            .mobile-nav {
                display: block;
            }
            
            .mobile-nav.active {
                right: 0;
            }
            
            .mobile-menu-overlay.active {
                opacity: 1;
                visibility: visible;
            }
            
            .mobile-nav-item {
                list-style: none;
                border-bottom: 1px solid var(--border-color);
            }
            
            .mobile-nav-link {
                display: flex;
                align-items: center;
                justify-content: flex-start;
                padding: 16px 20px;
                text-decoration: none;
                color: var(--text-primary);
                font-weight: 500;
                gap: 12px;
            }
            
            .mobile-nav-link:hover, .mobile-nav-link.active {
                color: var(--primary-color);
                background-color: var(--surface-color);
            }
            
            .mobile-nav-link.facebook:hover {
                color: var(--facebook-color);
                background-color: var(--facebook-light);
            }
            
            .mobile-nav-link.rss:hover {
                color: var(--rss-color);
                background-color: var(--rss-light);
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 16px;
            }
            
            .site-title {
                font-size: 28px;
            }
            
            .section-title {
                font-size: 20px;
            }
            
            .footer-links {
                flex-direction: column;
                gap: 10px;
            }
            
            .logo-text {
                font-size: 18px;
            }
            
            .mobile-header-actions {
                gap: 10px;
                left: 50px;
            }
            
            .mobile-site-title {
                font-size: 16px;
            }
            
            .mobile-logo {
                width: 24px;
                height: 24px;
            }
            
            .stats-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .footer-link {
                padding: 6px 12px;
            }
        }

        /* استایل برای لود تصاویر */
        .lazy-load {
            background-color: var(--surface-color);
            background-image: linear-gradient(90deg, var(--surface-color) 0%, var(--border-color) 50%, var(--surface-color) 100%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo-container">
                <a href="/" class="logo" id="homeLink">
                    <img src="https://www.pasgah.org/biography/logo.webp" alt="لوگو" class="logo-icon">
                    <span class="logo-text">پاسگاه</span>
                </a>
            </div>
            
            <div class="nav-container">
                <ul class="nav-links">
                    <li class="nav-item">
                        <a href="/" class="nav-link active" id="homeNavLink">خانه</a>
                    </li>
                    <li class="nav-item" id="categories-nav-item">
                        <a href="/categories/" class="nav-link" id="categories-nav-link">دسته‌بندی‌ها</a>
                        <div class="dropdown-menu" id="categories-dropdown">
                            <a href="/category/programming/" class="dropdown-link">
                                <span class="material-icons">code</span>
                                برنامه‌نویسی
                            </a>
                            <a href="/category/design/" class="dropdown-link">
                                <span class="material-icons">design_services</span>
                                طراحی
                            </a>
                            <a href="/category/technology/" class="dropdown-link">
                                <span class="material-icons">terminal</span>
                                فناوری
                            </a>
                            <a href="/category/tutorial/" class="dropdown-link">
                                <span class="material-icons">school</span>
                                آموزشی
                            </a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="/about/" class="nav-link" id="aboutNavLink">درباره من</a>
                    </li>
                    <li class="nav-item" id="contact-nav-item">
                        <a href="/contact/" class="nav-link" id="contact-nav-link">تماس با من</a>
                        <div class="dropdown-menu" id="contact-dropdown">
                            <a href="mailto:contact@pasgah.org" class="dropdown-link">
                                <span class="material-icons">mail</span>
                                ایمیل
                            </a>
                            <a href="https://facebook.com/pasgah.org" class="dropdown-link" target="_blank">
                                <span class="material-icons">facebook</span>
                                فیسبوک
                            </a>
                            <a href="/contact-form/" class="dropdown-link">
                                <span class="material-icons">forum</span>
                                فرم تماس
                            </a>
                        </div>
                    </li>
                </ul>
            </div>
            
            <div class="header-left">
                <div class="search-container">
                    <input type="text" class="search-input" id="searchInput" placeholder="جستجو..." autocomplete="off">
                    <button class="search-btn" id="searchBtn">
                        <span class="material-icons">search</span>
                    </button>
                </div>
                
                <a href="/atom.xml" class="rss-btn" target="_blank" title="اشتراک RSS">
                    <span class="material-icons">rss_feed</span>
                </a>
            </div>
            
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <span class="material-icons">menu</span>
            </button>
            
            <div class="mobile-site-info">
                <img src="https://www.pasgah.org/biography/logo.webp" alt="لوگو" class="mobile-logo">
                <span class="mobile-site-title">پاسگاه</span>
            </div>
            
            <!-- هدر موبایل: فقط آیکون جستجو -->
            <div class="mobile-header-actions">
                <button class="mobile-search-btn" id="mobileSearchBtn">
                    <span class="material-icons">search</span>
                </button>
            </div>
        </div>
        
        <div class="mobile-menu-overlay" id="mobileOverlay"></div>
        
        <!-- منوی موبایل ساده شده -->
        <div class="mobile-nav" id="mobileNav">
            <ul>
                <li class="mobile-nav-item">
                    <a href="/" class="mobile-nav-link active">
                        <span class="material-icons">home</span>
                        <span>صفحه اصلی</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="https://facebook.com/pasgah.org" class="mobile-nav-link facebook" target="_blank">
                        <span class="material-icons">facebook</span>
                        <span>فیسبوک</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="/atom.xml" class="mobile-nav-link rss" target="_blank">
                        <span class="material-icons">rss_feed</span>
                        <span>اشتراک RSS</span>
                    </a>
                </li>
            </ul>
        </div>
    </header>

    <section class="hero-section">
        <div class="container">
            <h1 class="site-title">پاسگاه | وبلاگ شخصی</h1>
            <p class="site-description">
                به وبلاگ پاسگاه خوش آمدید. اینجا مکانی است برای به اشتراک گذاری تجربیات، دانش و دیدگاه‌های من در حوزه فناوری، برنامه‌نویسی و طراحی. امیدوارم مطالب برای شما مفید و الهام‌بخش باشد.
            </p>
            <div class="stats-container">
                <div class="stat-item">
                    <span class="stat-number" id="totalPosts">۰</span>
                    <span class="stat-label">مقاله منتشر شده</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalCategories">۰</span>
                    <span class="stat-label">دسته‌بندی</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="latestUpdate">۱۴۰۳</span>
                    <span class="stat-label">آخرین به‌روزرسانی</span>
                </div>
            </div>
        </div>
    </section>

    <main class="container">
        <div class="main-content">
            <!-- بخش پست‌های اخیر -->
            <div class="section-header">
                <h2 class="section-title">آخرین مقالات</h2>
            </div>
            
            <div class="posts-grid" id="posts-container">
                <!-- پست‌ها توسط JavaScript بارگذاری می‌شوند -->
            </div>
            
            <!-- دکمه بارگذاری بیشتر -->
            <div class="load-more-container" id="loadMoreContainer">
                <button class="load-more-btn" id="loadMoreBtn">
                    <span class="material-icons">expand_more</span>
                    بارگذاری مقالات بیشتر
                </button>
            </div>
            
            <!-- اسپینر بارگذاری -->
            <div class="loading-spinner" id="loadingSpinner">
                <div class="spinner"></div>
                <p>در حال بارگذاری مقالات...</p>
            </div>
            
            <!-- پیام عدم وجود پست -->
            <div class="no-posts" id="noPostsMessage" style="display: none;">
                <span class="material-icons no-posts-icon">search_off</span>
                <h3 style="color: var(--text-secondary); margin-bottom: 10px;">مقاله‌ای یافت نشد</h3>
                <p style="color: var(--text-secondary);">به زودی مطالب جدیدی منتشر خواهد شد.</p>
            </div>
        </div>
    </main>

    <footer>
        <div class="container footer-container">
            <a href="/" class="footer-logo">
                <img src="https://www.pasgah.org/biography/logo.webp" alt="لوگو">
                <span>پاسگاه</span>
            </a>
            
            <!-- فوتر ساده شده -->
            <div class="footer-links">
                <a href="/" class="footer-link">
                    <span class="material-icons">home</span>
                    صفحه اصلی
                </a>
                <a href="https://facebook.com/pasgah.org" class="footer-link facebook" target="_blank">
                    <span class="material-icons">facebook</span>
                    فیسبوک
                </a>
                <a href="/atom.xml" class="footer-link rss" target="_blank">
                    <span class="material-icons">rss_feed</span>
                    اشتراک RSS
                </a>
            </div>
            
            <p class="copyright">
                © ۱۴۰۳ پاسگاه. تمامی حقوق محفوظ است.
            </p>
        </div>
    </footer>

    <script>
        // تنظیمات وبلاگ
        const BLOG_CONFIG = {
            githubUsername: 'darkblog',
            baseUrl: 'https://www.pasgah.org',
            postsPerPage: 10,
            defaultImage: 'https://images.unsplash.com/photo-1499951360447-b19be8fe80f5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80'
        };

        // متغیرهای گلوبال
        let allPosts = [];
        let currentPage = 1;
        let isLoading = false;
        let observer = null;

        // المنت‌های DOM
        const postsContainer = document.getElementById('posts-container');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const noPostsMessage = document.getElementById('noPostsMessage');
        const loadMoreBtn = document.getElementById('loadMoreBtn');
        const loadMoreContainer = document.getElementById('loadMoreContainer');
        const totalPostsElement = document.getElementById('totalPosts');
        const totalCategoriesElement = document.getElementById('totalCategories');
        const latestUpdateElement = document.getElementById('latestUpdate');

        // مدیریت lazy loading تصاویر
        function initImageObserver() {
            observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        const src = img.getAttribute('data-src');
                        
                        if (src) {
                            img.src = src;
                            img.classList.add('loaded');
                            img.removeAttribute('data-src');
                        }
                        
                        observer.unobserve(img);
                    }
                });
            }, {
                rootMargin: '50px',
                threshold: 0.1
            });
        }

        // تابع برای بارگذاری پست‌ها از API GitHub
        async function loadPostsFromGitHub(page = 1) {
            try {
                isLoading = true;
                loadingSpinner.style.display = 'block';
                
                // برای نمونه، از داده‌های ثابت استفاده می‌کنیم
                // در حالت واقعی، باید از API GitHub استفاده کنید
                
                // داده‌های نمونه
                const samplePosts = generateSamplePosts();
                
                if (page === 1) {
                    allPosts = samplePosts;
                }
                
                // شبیه‌سازی تأخیر شبکه
                await new Promise(resolve => setTimeout(resolve, 800));
                
                return samplePosts;
                
            } catch (error) {
                console.error('Error loading posts:', error);
                throw error;
            } finally {
                isLoading = false;
                loadingSpinner.style.display = 'none';
            }
        }

        // تابع برای تولید داده‌های نمونه
        function generateSamplePosts() {
            const categories = ['برنامه‌نویسی', 'طراحی', 'فناوری', 'آموزشی', 'شخصی'];
            const titles = [
                'آموزش React.js از مقدماتی تا پیشرفته',
                'معرفی Material Design 3 و ویژگی‌های جدید',
                'تأثیر هوش مصنوعی بر توسعه نرم‌افزار',
                'نحوه راه‌اندازی وبلاگ روی GitHub Pages',
                'چرا یادگیری جاوااسکریپت ضروری است؟',
                'تجربیات من از یک سال وبلاگ نویسی',
                'بهینه‌سازی وبسایت برای موتورهای جستجو',
                'آموزش Vue.js برای مبتدیان',
                'طراحی واکنش‌گرا با CSS Grid و Flexbox',
                'مدیریت وضعیت در برنامه‌های React',
                'آموزش TypeScript از صفر',
                'بهترین روش‌های توسعه وب',
                'آموزش Node.js و Express',
                'طراحی رابط کاربری مدرن',
                'امنیت در توسعه وب'
            ];
            
            const images = [
                'https://images.unsplash.com/photo-1633356122544-f134324a6cee?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80',
                'https://images.unsplash.com/photo-1558655146-364adaf1fcc9?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80',
                'https://images.unsplash.com/photo-1677442136019-21780ecad995?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80',
                'https://images.unsplash.com/photo-1618401471353-b98afee0b2eb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80',
                'https://images.unsplash.com/photo-1627398242454-45a1465c2479?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80',
                'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80'
            ];
            
            const posts = [];
            const totalPosts = 35; // تعداد کل پست‌های نمونه
            
            for (let i = 1; i <= totalPosts; i++) {
                const category = categories[Math.floor(Math.random() * categories.length)];
                const title = titles[Math.floor(Math.random() * titles.length)];
                const image = images[Math.floor(Math.random() * images.length)];
                
                posts.push({
                    id: i,
                    title: `${title} - بخش ${i}`,
                    excerpt: 'این یک خلاصه نمونه از مقاله است. در این مقاله به بررسی موضوع مورد نظر می‌پردازیم و نکات مهم را بررسی می‌کنیم.',
                    category: category,
                    date: `۱۴۰۳/${String(Math.floor(Math.random() * 12) + 1).padStart(2, '0')}/${String(Math.floor(Math.random() * 30) + 1).padStart(2, '0')}`,
                    readTime: `${Math.floor(Math.random() * 10) + 3} دقیقه`,
                    image: image,
                    url: `/post/article-${i}/`
                });
            }
            
            // مرتب‌سازی بر اساس تاریخ (جدیدترین اول)
            return posts.sort((a, b) => b.id - a.id);
        }

        // تابع برای ایجاد المان پست
        function createPostElement(post, index) {
            const postElement = document.createElement('a');
            postElement.className = 'post-card';
            postElement.href = post.url;
            postElement.style.animationDelay = `${index * 0.1}s`;
            
            postElement.innerHTML = `
                <div class="post-image">
                    <div class="lazy-load" style="width: 100%; height: 100%;"></div>
                    <img data-src="${post.image || BLOG_CONFIG.defaultImage}" 
                         alt="${post.title}" 
                         style="display: none;">
                    <span class="post-category-badge">${post.category}</span>
                </div>
                <div class="post-content">
                    <h2 class="post-title">${post.title}</h2>
                    <p class="post-excerpt">${post.excerpt}</p>
                    <div class="post-meta">
                        <span class="post-date">
                            <span class="material-icons" style="font-size: 16px;">calendar_today</span>
                            ${post.date}
                        </span>
                        <span class="post-read-time">
                            <span class="material-icons" style="font-size: 16px;">schedule</span>
                            ${post.readTime}
                        </span>
                    </div>
                </div>
            `;
            
            return postElement;
        }

        // تابع برای نمایش پست‌ها
        function renderPosts(posts) {
            if (posts.length === 0) {
                noPostsMessage.style.display = 'block';
                loadMoreContainer.style.display = 'none';
                return;
            }
            
            posts.forEach((post, index) => {
                const postElement = createPostElement(post, index);
                postsContainer.appendChild(postElement);
                
                // تنظیم observer برای تصویر
                setTimeout(() => {
                    const img = postElement.querySelector('img');
                    if (img && observer) {
                        observer.observe(img);
                    }
                }, 100);
            });
            
            // به‌روزرسانی آمار
            updateStats(posts);
            
            // نمایش یا مخفی کردن دکمه بارگذاری بیشتر
            const totalDisplayed = document.querySelectorAll('.post-card').length;
            if (totalDisplayed >= allPosts.length) {
                loadMoreBtn.disabled = true;
                loadMoreBtn.innerHTML = '<span class="material-icons">check</span> تمام مقالات نمایش داده شد';
            }
        }

        // تابع برای بارگذاری پست‌های صفحه جاری
        async function loadCurrentPage() {
            if (isLoading) return;
            
            try {
                const startIndex = (currentPage - 1) * BLOG_CONFIG.postsPerPage;
                const endIndex = startIndex + BLOG_CONFIG.postsPerPage;
                const pagePosts = allPosts.slice(startIndex, endIndex);
                
                renderPosts(pagePosts);
                
                if (pagePosts.length < BLOG_CONFIG.postsPerPage || endIndex >= allPosts.length) {
                    loadMoreBtn.disabled = true;
                }
                
            } catch (error) {
                console.error('Error loading page:', error);
                noPostsMessage.style.display = 'block';
            }
        }

        // تابع برای بارگذاری صفحه بعدی
        async function loadNextPage() {
            if (isLoading || loadMoreBtn.disabled) return;
            
            currentPage++;
            await loadCurrentPage();
        }

        // تابع برای به‌روزرسانی آمار
        function updateStats(posts) {
            const totalDisplayed = document.querySelectorAll('.post-card').length;
            totalPostsElement.textContent = totalDisplayed;
            
            // محاسبه تعداد دسته‌بندی‌های منحصر به فرد
            const displayedPosts = Array.from(document.querySelectorAll('.post-card'))
                .map(card => card.querySelector('.post-category-badge').textContent);
            const uniqueCategories = [...new Set(displayedPosts)];
            totalCategoriesElement.textContent = uniqueCategories.length;
            
            // آخرین تاریخ
            if (posts.length > 0) {
                latestUpdateElement.textContent = '۱۴۰۳';
            }
        }

        // تابع برای جستجو
        function performGoogleSearch(query) {
            if (!query || query.trim() === '') {
                alert('لطفاً عبارت جستجو را وارد کنید.');
                return;
            }
            
            const encodedQuery = encodeURIComponent(query);
            const googleSearchUrl = `https://www.google.com/search?q=site:${BLOG_CONFIG.baseUrl}+${encodedQuery}`;
            
            window.open(googleSearchUrl, '_blank');
            searchInput.value = '';
            
            if (isMobileMenuOpen) {
                closeMobileMenu();
            }
        }

        // مدیریت منوی موبایل
        let isMobileMenuOpen = false;

        function toggleMobileMenu() {
            if (isMobileMenuOpen) {
                closeMobileMenu();
            } else {
                openMobileMenu();
            }
        }

        function openMobileMenu() {
            mobileNav.classList.add('active');
            mobileOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            isMobileMenuOpen = true;
        }

        function closeMobileMenu() {
            mobileNav.classList.remove('active');
            mobileOverlay.classList.remove('active');
            document.body.style.overflow = '';
            isMobileMenuOpen = false;
        }

        // مقداردهی اولیه
        document.addEventListener('DOMContentLoaded', async () => {
            // مقداردهی اولیه observer تصاویر
            initImageObserver();
            
            // بارگذاری اولیه پست‌ها
            try {
                await loadPostsFromGitHub();
                await loadCurrentPage();
            } catch (error) {
                console.error('Failed to load initial posts:', error);
                noPostsMessage.style.display = 'block';
            }
            
            // رویداد دکمه بارگذاری بیشتر
            loadMoreBtn.addEventListener('click', loadNextPage);
            
            // رویدادهای جستجو
            const searchInput = document.getElementById('searchInput');
            const searchBtn = document.getElementById('searchBtn');
            const mobileSearchBtn = document.getElementById('mobileSearchBtn');
            
            searchBtn.addEventListener('click', () => {
                const query = searchInput.value.trim();
                performGoogleSearch(query);
            });
            
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    const query = searchInput.value.trim();
                    performGoogleSearch(query);
                }
            });
            
            mobileSearchBtn.addEventListener('click', () => {
                const query = prompt('لطفاً عبارت جستجو را وارد کنید:');
                if (query !== null && query.trim() !== '') {
                    performGoogleSearch(query);
                }
            });
            
            // مدیریت منوی موبایل
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileOverlay = document.getElementById('mobileOverlay');
            
            mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            mobileOverlay.addEventListener('click', closeMobileMenu);
            
            // بستن منو با کلیک روی لینک‌ها
            document.querySelectorAll('.mobile-nav-link').forEach(link => {
                link.addEventListener('click', () => {
                    setTimeout(closeMobileMenu, 300);
                });
            });
            
            // تنظیم ناوبری فعال
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    if (link.getAttribute('href') === '#') {
                        e.preventDefault();
                    }
                });
            });
        });
    </script>
</body>
</html>
